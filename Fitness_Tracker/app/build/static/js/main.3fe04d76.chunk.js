(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){},125:function(e,t,a){},127:function(e,t,a){},145:function(e,t,a){},166:function(e,t){e.exports={makeID:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,s=0;s<e;s++)t+=a.charAt(Math.floor(Math.random()*n));return t}}},171:function(e,t,a){e.exports=a(339)},177:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},309:function(e,t,a){},336:function(e,t){},339:function(e,t,a){"use strict";a.r(t);a(172),a(173);var n=a(0),s=a.n(n),r=a(159),i=a.n(r),c=(a(177),a(178),a(74)),o=a(70),l=a(2),u=a(3),m=a(5),d=a(4),p=a(6),h=(a(125),a(12)),g=a(36),v=a(16),f=a(8),b=a.n(f),y=a(11),E=a(1),N=(a(183),a(9)),S=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loading-screen"},s.a.createElement("h1",null,"Loading..."))}}]),t}(n.Component),w=a(15),k=a(13),j={border:"2px solid rgb(255, 162, 162)"},O={color:"rgb(255, 162, 162)",fontSize:"10pt",width:"90%",textAlign:"left"};function x(e,t,a,n,r,i){return s.a.createElement("div",{className:"field-container group"},s.a.createElement("label",{className:"label",htmlFor:a},e),s.a.createElement(w.b,{style:r&&i?j:null,name:a,className:n,type:t}),s.a.createElement(w.a,{name:a},function(e){return s.a.createElement("div",{style:O},e)}))}function C(e){var t=k.b({signInEmail:k.d().required("Cannot be empty"),signInPassword:k.d().required("Cannot be empty"),remember:k.d().max(250,"Must be 250 characters or less")});return s.a.createElement("div",{className:"sign-in-htm"},s.a.createElement(w.d,{initialValues:{signInEmail:"",signInPassword:"",remember:!1},validationSchema:t,onSubmit:function(t,a){var n=a.setSubmitting;console.log(t),e.onSignIn(t),n(!1)}},function(e){var t,a,n,r=e.errors,i=e.touched;return s.a.createElement(w.c,null,x("Email","text","signInEmail","input-field",r.signInEmail,i.signInEmail),x("Password","password","signInPassword","input-field",r.signInPassword,i.signInPassword),(t="Keep me signed in",a="remember",n="icon",s.a.createElement("div",{className:"group"},s.a.createElement(w.b,{type:"checkbox",name:a,id:"check",className:"check"}),s.a.createElement("label",{htmlFor:"check"},s.a.createElement("span",{className:n})," ",t))),s.a.createElement("div",{className:"group"},s.a.createElement("input",{type:"submit",className:"button",value:"Sign In",id:"signInButton"})))}))}function L(e){var t=k.b({signUpEmail:k.d().required("Cannot be empty").email("Please enter a valid email").max(100,"Must be less than 100 characters long"),signUpPassword:k.d().required("Cannot be empty").matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,"Must contain 8 characters, one uppercase, one lowercase, and one number"),signUpPasswordConf:k.d().required("Cannot be empty").matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}/,"Must contain 8 characters, one uppercase, one lowercase, one number").oneOf([k.c("signUpPassword"),null],"Passwords must match"),signUpFirstName:k.d().required("Cannot be empty"),signUpLastName:k.d().required("Cannot be empty"),signUpUsername:k.d().required("Cannot be empty")});return s.a.createElement("div",{className:"sign-up-htm"},s.a.createElement(w.d,{initialValues:{signUpEmail:"",signUpPassword:"",signUpPasswordConf:"",signUpFirstName:"",signUpLastName:"",signUpUsername:""},validationSchema:t,onSubmit:function(t,a){var n=a.setSubmitting;console.log(t),e.onSignUp(t),n(!1)}},function(e){var t=e.errors,a=e.touched;return s.a.createElement(w.c,null,x("Email","text","signUpEmail","input-field",t.signUpEmail,a.signUpEmail),x("Password","password","signUpPassword","input-field",t.signUpPassword,a.signUpPassword),x("Repeat Password","password","signUpPasswordConf","input-field",t.signUpPasswordConf,a.signUpPasswordConf),x("First Name","text","signUpFirstName","input-field",t.signUpFirstName,a.signUpFirstName),x("Last Name","text","signUpLastName","input-field",t.signUpLastName,a.signUpLastName),x("Username","text","signUpUsername","input-field",t.signUpUsername,a.signUpUsername),s.a.createElement("div",{className:"group"},s.a.createElement("input",{type:"submit",className:"button",value:"Sign Up",id:"signInButton"})))}))}var D=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"headers"},s.a.createElement("input",{id:"tab-1",type:"radio",name:"tab",className:"sign-in",checked:this.props.renderSignIn,onChange:this.props.onSignInClick}),s.a.createElement("label",{htmlFor:"tab-1",className:"tab"},"Sign In"),s.a.createElement("input",{id:"tab-2",type:"radio",name:"tab",className:"sign-up",checked:!this.props.renderSignIn,onChange:this.props.onSignUpClick}),s.a.createElement("label",{htmlFor:"tab-2",className:"tab"},"Sign Up"),s.a.createElement("div",{className:"login-form"},s.a.createElement(C,{onSignIn:this.props.onSignIn}),s.a.createElement(L,{onSignUp:this.props.onSignUp})))}}]),t}(n.Component),T=(a(127),a(46)),U=a(98);var I=function(e){var t=Object(n.useState)(!0),a=Object(T.a)(t,2),r=a[0],i=a[1];return r?s.a.createElement(U.a,{variant:"danger",onClose:function(){i(!1),e.onClose()},dismissible:!0},s.a.createElement("p",null,e.msg)):null};var F=function(e){var t=Object(n.useState)(!0),a=Object(T.a)(t,2),r=a[0],i=a[1];return r?s.a.createElement(U.a,{variant:"success",onClose:function(){i(!1),e.onClose()},dismissible:!0},s.a.createElement("p",null,e.msg)):null};a(191);function P(e,t){e?Object(N.setInLocalStorage)(N.storageKey,{token:t}):Object(N.setInSessionStorage)(N.storageKey,{token:t})}var M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isLoading:!0,signedIn:!1,token:"",renderSignIn:!0,errorMsgs:new Set,successMsgs:new Set},a.displayErrors=a.displayErrors.bind(Object(E.a)(a)),a.showSuccesses=a.showSuccesses.bind(Object(E.a)(a)),a.showError=a.showError.bind(Object(E.a)(a)),a.showSuccess=a.showSuccess.bind(Object(E.a)(a)),a.switchToSignIn=a.switchToSignIn.bind(Object(E.a)(a)),a.switchToSignUp=a.switchToSignUp.bind(Object(E.a)(a)),a.clearSignUp=a.clearSignUp.bind(Object(E.a)(a)),a.clearSignIn=a.clearSignIn.bind(Object(E.a)(a)),a.onSignIn=a.onSignIn.bind(Object(E.a)(a)),a.onSignUp=a.onSignUp.bind(Object(E.a)(a)),a.tokenLogin=a.tokenLogin.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("mounting...");var e=Object(N.getFromLocalStorage)(N.storageKey);if(e&&e.token)try{this.tokenLogin(e.token)}catch(t){throw t}else this.setState({isLoading:!1})}},{key:"clearSignIn",value:function(){this.setState({isLoading:!1,signInEmail:"",signInPassword:"",remember:!1})}},{key:"clearSignUp",value:function(){console.log("clearing..."),this.setState({isLoading:!1,signUpEmail:"",signUpPassword:"",signUpPasswordConf:"",signUpFirstName:"",signUpLastName:"",signUpUserName:""})}},{key:"tokenLogin",value:function(){var e=Object(y.a)(b.a.mark(function e(t){var a,n,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("token is: ",t),(a=new Headers).append("authorization","Bearer ".concat(t)),e.next=5,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/api/account/verify",{method:"GET",headers:a});case 5:return n=e.sent,e.next=8,n.json();case 8:(s=e.sent).success?this.setState({token:t,signedIn:!0,isLoading:!1}):(console.log("verification of token went wrong"),console.log(s.messages),this.setState({isLoading:!1}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onSignUp",value:function(){var e=Object(y.a)(b.a.mark(function e(t){var a,n,s,r,i,c,o,l,u;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({errorMsgs:[],successMsgs:[]}),console.log("signing up..."),a=t.signUpEmail,n=t.signUpPassword,s=t.signUpPasswordConf,r=t.signUpFirstName,i=t.signUpLastName,c=t.signUpUsername,e.next=5,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/api/account/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,passwordConf:s,email:a,firstName:r,lastName:i,username:c})});case 5:return o=e.sent,e.next=8,o.json();case 8:l=e.sent,console.log("json",l),l.success?(this.setState({successMsgs:new Set(Object(v.a)(l.messages))}),this.clearSignUp(),this.signUpValid=[!1,!1,!1,!1,!1,!1]):(u=new Set(Object(v.a)(l.messages)),this.setState({isLoading:!1,errorMsgs:u}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onSignIn",value:function(){var e=Object(y.a)(b.a.mark(function e(t){var a,n,s,r,i,c,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({errorMsgs:[],successMsgs:[]}),a=t.signInEmail,n=t.signInPassword,s=t.remember,console.log("signing in..."),r=Object(N.getFromLocalStorage)(N.storageKey),"test"===a&&this.setState({isLoading:!1}),!r||!r.token){e.next=11;break}return alert("token already present"),i=r.token,e.next=10,this.tokenLogin(i);case 10:return e.abrupt("return",e.sent);case 11:return this.setState({isLoading:!0}),e.next=14,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/api/account/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:n,remember:s})});case 14:return c=e.sent,e.next=17,c.json();case 17:o=e.sent,console.log("json",o),o.success?(P(s,o.token),this.setState({isLoading:!1,signInPassword:"",signInEmail:"",token:o.token,signedIn:!0}),this.clearSignIn()):(console.log(o),this.setState(function(e){return{isLoading:!1,errorMsgs:new Set([].concat(Object(v.a)(e.errorMsgs),Object(v.a)(o.messages)))}}));case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showError",value:function(e,t){var a=this;return s.a.createElement(I,{msg:e,key:t,onClose:function(){a.setState(function(t){return{errorMsgs:new Set(Object(v.a)(t.errorMsgs).filter(function(t){return t!==e}))}})}})}},{key:"displayErrors",value:function(){return Object(v.a)(this.state.errorMsgs).map(this.showError)}},{key:"showSuccess",value:function(e,t){var a=this;return s.a.createElement(F,{msg:e,key:t,onClose:function(){a.setState(function(t){return{successMsgs:new Set(Object(v.a)(t.successMsgs).filter(function(t){return t!==e}))}})}})}},{key:"showSuccesses",value:function(){return Object(v.a)(this.state.successMsgs).map(this.showSuccess)}},{key:"switchToSignIn",value:function(){this.setState({renderSignIn:!0})}},{key:"switchToSignUp",value:function(){this.setState({renderSignIn:!1})}},{key:"render",value:function(){return console.log("rendering login"),this.state.isLoading?s.a.createElement("div",null,s.a.createElement("p",null,"Loading...")):Object(N.getToken)()?s.a.createElement("div",null,s.a.createElement(g.a,{to:{pathname:"/app",state:{token:this.state.token}}})):s.a.createElement("div",{className:"body"},s.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Open+Sans:600"}),s.a.createElement("div",{className:"login-wrap"},s.a.createElement("div",{className:"login-html"},s.a.createElement("div",{className:"errors-container"},this.displayErrors()),s.a.createElement("div",{className:"success-container"},this.showSuccesses()),s.a.createElement(S,null),s.a.createElement(D,{renderSignIn:this.state.renderSignIn,onSignInClick:this.switchToSignIn,onSignUpClick:this.switchToSignUp,signUpValid:this.signUpValid,signInValid:this.signInValid,onSignIn:this.onSignIn,onSignUp:this.onSignUp}))))}}]),t}(n.Component),A=a(95),R=a.n(A),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={errors:!1,isLoading:!0},a.renderDisplay=a.renderDisplay.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=R.a.parse(this.props.location.search),a=t.token;console.log(t);var n="https://us-central1-athlos-live.cloudfunctions.net/athlos-server/confirmation?token=".concat(a);fetch(n,{method:"GET"}).then(function(e){return e.json()}).then(function(t){console.log(t),t.success?e.setState({isLoading:!1}):(Object(N.setInLocalStorage)(N.storageKey+"_confirmationErr",t.messages),e.setState({errors:!0,isLoading:!1}))}).catch(function(e){if(e)throw e})}},{key:"showError",value:function(e,t){return s.a.createElement(I,{msg:e,key:t,onClose:function(){}})}},{key:"displayErrors",value:function(){var e=Object(N.getFromLocalStorage)(N.storageKey+"_confirmationErr");if(Object(N.removeFromLocalStorage)(N.storageKey+"_confirmationErr"),console.log("confirmation error should display..."),null!==e)return Object.values(e).map(this.showError)}},{key:"renderDisplay",value:function(){var e=this;return this.state.isLoading?s.a.createElement("div",null,s.a.createElement(S,null)):this.state.errors?s.a.createElement(s.a.Fragment,null,s.a.createElement("h5",{className:"card-header conf-header-error"},"Oh No :("),s.a.createElement("div",{className:"card-body text-center errors-container"},this.displayErrors())):s.a.createElement(s.a.Fragment,null,s.a.createElement("h5",{className:"card-header conf-header"},"You're All Set!"),s.a.createElement("div",{className:"card-body text-center"},s.a.createElement("p",null,"Your registration was successful! Click below to return to the login page."),s.a.createElement("div",{className:"navLink",onClick:function(){e.props.history.push("/")}},"Back to login")))}},{key:"render",value:function(){return s.a.createElement("div",{className:"conf-page"},s.a.createElement("div",{className:"card m-5"},this.renderDisplay()))}}]),t}(n.Component),q=Object(g.g)(J),B=a(166),H=Object(B.makeID)(8),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={validToken:!0,newPwText:"",newPwTextConf:""},a.onNewPassChange=a.onNewPassChange.bind(Object(E.a)(a)),a.onNewPassConfChange=a.onNewPassConfChange.bind(Object(E.a)(a)),a.onSubmit=a.onSubmit.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=R.a.parse(this.props.location.search).token,t=new Headers;t.append("authorization","Bearer ".concat(e)),fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/api/account/verify",{method:"GET",headers:t}).then(function(e){return e.json()}).then(function(e){e.success?Object(N.setInStorage)(H+"_email",e.token):alert("verification from the mail link went wrong")}).catch(function(e){throw e})}},{key:"onNewPassChange",value:function(e){this.setState({newPwText:e.target.value})}},{key:"onNewPassConfChange",value:function(e){this.setState({newPwTextConf:e.target.value})}},{key:"onSubmit",value:function(){console.log("submitted!");var e=this.state,t=e.newPwText;if(t!==e.newPwTextConf)return alert("passwords must match!");var a={newPassword:t,email:Object(N.getFromLocalStorage)(H+"_email").email};console.log(a),fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/confPasswordReset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){e.success?alert("success"):alert("something went wrong: ",e)}).catch(function(e){throw e})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"group"},s.a.createElement("label",{htmlFor:"new-pass"},"enter new password"),s.a.createElement("input",{id:"new-pass",type:"password",className:"input","data-type":"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters",onChange:this.onNewPassChange})),s.a.createElement("div",{className:"group"},s.a.createElement("label",{htmlFor:"new-pass-reap"},"confirm enter new password"),s.a.createElement("input",{id:"new-pass-reap",type:"password",className:"input","data-type":"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters",onChange:this.onNewPassConfChange})),s.a.createElement("div",{className:"group"},s.a.createElement("input",{type:"submit",className:"button",value:"Submit",id:"submitNewPassButton"}))))}}]),t}(n.Component),z=a(50),_=s.a.createContext(),W=(a(205),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"search-box",onMouseLeave:this.props.mouseLeave},s.a.createElement("form",{onSubmit:this.props.search},s.a.createElement("input",{type:"text",name:"",className:"search-txt",placeholder:"Type to search",onChange:this.props.onSearchTextChange,value:this.props.searchText}),s.a.createElement("div",{className:"search-btn"},s.a.createElement("i",{className:"fas fa-search"}),s.a.createElement("input",{className:"search-btn-input",type:"submit",value:""}))))}}]),t}(n.Component)),K="https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getBests",V="https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getProfilePic",Y="https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getUsername";function Z(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(y.a)(b.a.mark(function e(t){var a,n,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t},e.next=3,fetch(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(s=e.sent).success){e.next=9;break}return e.abrupt("return",s.bests);case 9:alert("could not get bests for id: ",t);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(e){return $.apply(this,arguments)}function $(){return($=Object(y.a)(b.a.mark(function e(t){var a,n,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t},e.next=3,fetch(V,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(s=e.sent).success){e.next=9;break}return e.abrupt("return",s.profilePicture.profileURL);case 9:alert("could not get profile url for id: ",t);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(y.a)(b.a.mark(function e(t){var a,n,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t},e.next=3,fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(s=e.sent).success){e.next=9;break}return e.abrupt("return",s.username);case 9:alert("could not get profile url for id: ",t);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e){return s.a.createElement("li",{className:"list-group-item friend-display"},s.a.createElement("div",{className:"img-container"},s.a.createElement("img",{src:e.profileUrl?e.profileUrl:e.defaultProfile,alt:e.imgAlt,onClick:e.onClick})),s.a.createElement("div",{className:"user-info"},s.a.createElement("div",{className:"top-row ml-3"},s.a.createElement("div",{className:"name-container"},s.a.createElement("strong",{className:"name",onClick:e.onClick},e.firstName," ",e.lastName)),e.isFriend?s.a.createElement("div",{className:"rank"},"Rank: ".concat(e.rank)):e.isFriendRequest?s.a.createElement("div",{className:"accept-request-btn",onClick:e.onAcceptRequest},"Accept"):s.a.createElement("div",{className:"send-req-btn"},"Request Sent/Add Friend")),s.a.createElement("div",{className:"bot-row ml-3"},s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"stat"},"tot steps"),s.a.createElement("div",{className:"stat"},"tot laps"),s.a.createElement("div",{className:"stat"},"highest jump")))))}var ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={friendRequestListItems:[]},a.createFriendRequests=a.createFriendRequests.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createFriendRequests();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createFriendRequests",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,r,i,c,o,l,u,m,d,p,h,g,v,f,y,E,N=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.friendRequests,n=t.addFriendToState,r=t.removeFriendReq,i=t.acceptRequest,c=[],o=function(){N.props.history.push("/app/profile/".concat(f))},l=function(){i(d,p,h),r(d),n(d,p,h)},u=0;case 5:if(!(u<a.length)){e.next=18;break}return m=a[u],d=m.id,p=m.firstName,h=m.lastName,e.next=9,Promise.all([ee(d),Z(d),X(d)]);case 9:g=e.sent,v=Object(T.a)(g,3),f=v[0],y=v[1],E=v[2],c.push(s.a.createElement(ae,{key:d,isFriend:!1,isFriendRequest:!0,onClick:o,onAcceptRequest:l,profileUrl:E,defaultProfile:"default",imgAlt:"alt",firstName:p,lastName:h,bests:y}));case 15:u++,e.next=5;break;case 18:this.setState({friendRequestListItems:c});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"friend-requests",style:se},s.a.createElement("h4",null,"requests... ",this.props.numRequests),s.a.createElement("ul",{className:"friend-requests-list"},this.state.friendRequestListItems))}}]),t}(n.Component),se={marginTop:"100px"},re=Object(g.g)(ne),ie=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),s.a.createElement("div",{className:"community-header"},s.a.createElement("nav",{className:"navbar navbar-expand sticky bg-light"},s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("span",{className:"nav-link mr-3",onClick:function(){e.props.setDisplay("friends")}},"Friends")),s.a.createElement("li",{className:"nav-item mr-3"},s.a.createElement("span",{className:"nav-link",onClick:function(){e.props.setDisplay("requests")}},"Requests")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("span",{className:"nav-link",onClick:function(){e.props.setDisplay("search")}},"Search")))))}}]),t}(n.Component),ce=Object(g.g)(ie),oe=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.context.friendTableRows;return s.a.createElement("div",null,s.a.createElement("ul",{className:"list-group list-group-flush"},e))}}]),t}(n.Component);oe.contextType=_;var le=oe,ue=(a(206),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e)))._isMounted=!1,a.state={display:"friends",searches:[],searchText:"",showQueries:!1,emptySearch:!1,numFriendsDisplay:25},a.renderSearch=a.renderSearch.bind(Object(E.a)(a)),a.search=a.search.bind(Object(E.a)(a)),a.onSearchTextChange=a.onSearchTextChange.bind(Object(E.a)(a)),a.mouseLeave=a.mouseLeave.bind(Object(E.a)(a)),a.sendReq=a.sendReq.bind(Object(E.a)(a)),a.addFriendToState=a.addFriendToState.bind(Object(E.a)(a)),a.removeFriendReq=a.removeFriendReq.bind(Object(E.a)(a)),a.acceptRequest=a.acceptRequest.bind(Object(E.a)(a)),a.clearSearch=a.clearSearch.bind(Object(E.a)(a)),a.setDisplay=a.setDisplay.bind(Object(E.a)(a)),a.renderDisplay=a.renderDisplay.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,console.log("community has unmounted")}},{key:"componentDidMount",value:function(){console.log("community has mounted"),this._isMounted=!0}},{key:"setDisplay",value:function(e){this.setState({display:e})}},{key:"removeFriendReq",value:function(e){console.log("removing friend with id: ",e);var t=this.context.friendRequests.filter(function(t){return t.senderID!==e});console.log("removed",t),this.setState({friendRequests:t})}},{key:"addFriendToState",value:function(e,t,a){var n=this.context.friends,s={id:e,firstName:t,lastName:a};this.setState({friends:[].concat(Object(v.a)(n),[s])})}},{key:"onSearchTextChange",value:function(e){this.setState({searchText:e.target.value})}},{key:"search",value:function(){var e=Object(y.a)(b.a.mark(function e(t){var a,n,s,r,i,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.searchText,n=Object(N.getToken)(),s={searchText:a,userToken:n},!this.state.searchText){e.next=14;break}return e.next=7,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/searchUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 7:return r=e.sent,e.next=10,r.json();case 10:(i=e.sent).success||alert(i.message),void 0===(c=i.users)||0===c.length?this.setState({emptySearch:!0}):(console.log(c),this.setState({searches:c,showQueries:!0,emptySearch:!1}));case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"mouseLeave",value:function(){this.setState({searchText:""})}},{key:"decodeToken",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(N.getToken)(),(a=new Headers).append("authorization","Bearer ".concat(t)),e.next=5,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/tokenToID",{method:"GET",headers:a});case 5:return n=e.sent,e.next=8,n.json();case 8:return s=e.sent,r=s.userID,e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"sendReq",value:function(){var e=Object(y.a)(b.a.mark(function e(t,a,n,s){var r,i,c,o,l,u,m,d;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.context.socket,i=this.context,c=i.firstName,o=i.lastName,l=i.username,e.next=4,this.decodeToken();case 4:u=e.sent,m=Object(N.getToken)(),console.log("sending request",u),r.emit("sendFriendRequest",{senderID:u,senderFirstName:c,senderLastName:o,senderUsername:l,receiverID:t}),d=JSON.stringify({token:m,senderFirstName:c,senderLastName:o,senderUsername:l,receiverID:t,receiverFirstName:a,receiverLastName:n,receiverUsername:s}),fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/sendFriendReq",{method:"POST",headers:{"Content-Type":"application/json"},body:d}).then(function(e){return e.json()}).then(function(e){console.log(JSON.stringify(e))}).catch(function(e){throw e});case 10:case"end":return e.stop()}},e,this)}));return function(t,a,n,s){return e.apply(this,arguments)}}()},{key:"acceptRequest",value:function(){var e=Object(y.a)(b.a.mark(function e(t,a,n){var s,r,i,c,o,l,u,m,d;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(N.getToken)(),r=this.context,i=r.firstName,c=r.lastName,o=this.context.socket,l=this.decodeToken(),o.emit("acceptFriendRequest",{userID:l,receiverFirstName:i,receiverLastName:c,otherFriendID:t}),u={userToken:s,receiverFirstName:i,receiverLastName:c,senderID:t,senderFirstName:a,senderLastName:n},e.next=8,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/acceptRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});case 8:return m=e.sent,e.next=11,m.json();case 11:d=e.sent,console.log("json message: ",d.message);case 13:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"clearSearch",value:function(){this.setState({searchText:"",searches:[],showQueries:!1,emptySearch:!1})}},{key:"renderSearch",value:function(){var e=this,t=[],a=this.state,n=a.searches,r=a.emptySearch,i=this.context,c=i.friends,o=i.friendRequests,l=i.friendsPending,u=i.rootURL,m=new Set(c.map(function(e){return e.id})),d=new Set(o.map(function(e){return e.id})),p=new Set(l.map(function(e){return e.id}));r&&t.push(s.a.createElement("div",{className:"empty-search-container",key:"empty-key"},s.a.createElement("span",null,"No search results :( try being more specific")));return n.forEach(function(a,n){var r=a.firstName,i=a.lastName,c=a._id,o=a.username,l=a.profilePicture;r=r.charAt(0).toUpperCase()+r.slice(1),i=i.charAt(0).toUpperCase()+i.slice(1),t.push(s.a.createElement("div",{key:c+"_search",className:"user-container"},s.a.createElement("img",{src:l.profileURL,alt:"default"}),s.a.createElement(h.b,{to:{pathname:"".concat(u,"/profile/").concat(o)},className:"search-name ml-3"},r,", ",i),s.a.createElement("div",{className:"search-relationship"},function(t,a,n,r){var i=t.firstName,c=t.lastName,o=t._id,l=t.username;return a.has(o)?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-check ml-1 mr-1"}),s.a.createElement("span",{className:"mr-1"},"Friends")):n.has(o)?s.a.createElement("div",{className:"rel-wrapper",onClick:function(){e.acceptRequest(o,i,c),e.removeFriendReq(o),e.addFriendToState(o,i,c)}},s.a.createElement("i",{className:"fas fa-user-plu req-sent ml-1 mr-1"}),s.a.createElement("span",{className:"accept-req-btn"},"accept")):r.has(o)?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-user-plu req-sent ml-1 mr-1"}),s.a.createElement("span",{className:""},"Request Sent")):s.a.createElement("div",{className:"rel-wrapper",onClick:function(){e.sendReq(o,i,c,l)}},s.a.createElement("i",{className:"fas fa-user-plu req-sent ml-1 mr-1"}),s.a.createElement("span",{className:"add-friend-btn ml-1"},"Add"))}(a,m,d,p))))}),t.push(s.a.createElement("div",{className:"clear-search-container mt-3",key:"clear-search-container"},s.a.createElement("span",{onClick:this.clearSearch},"Clear Search"))),t}},{key:"renderDisplay",value:function(){var e=this.state.display,t=this.context;return"friends"===(e=e.toLowerCase())?s.a.createElement(le,null):"requests"===e?s.a.createElement(re,{userToken:Object(N.getToken)(),userFirstName:t.userFirstName,userLastName:t.userLastName,addFriendToState:this.addFriendToState,removeFriendReq:this.removeFriendReq,friendRequests:t.friendRequests,friendsPending:t.friendsPending,friends:t.friends,numRequests:t.numRequests,acceptRequest:this.acceptRequest}):"search"===e?s.a.createElement("div",{className:"search-wrapper"},s.a.createElement("h4",null,"Search for users"),s.a.createElement(W,{search:this.search,onSearchTextChange:this.onSearchTextChange,mouseLeave:this.mouseLeave,searchText:this.state.searchText}),s.a.createElement("div",{className:"queries"+(this.state.showQueries?" expand":" collapsed")},this.renderSearch())):(console.log("display is not friends, requests, or search"),null)}},{key:"render",value:function(){return s.a.createElement("div",{className:"community-container"},s.a.createElement(ce,{setDisplay:this.setDisplay}),this.renderDisplay())}}]),t}(n.Component));ue.contextType=_;var me=ue,de=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).getLabels=a.getLabels.bind(Object(E.a)(a)),a.renderNum=a.renderNum.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getLabels",value:function(e){var t=this.context.settings.unitSystem;return"run"===e?{numLabel:"steps",secondaryLabel:"metric"===t?"km":"miles"}:"swim"===e?{numLabel:"laps",secondaryLabel:"metric"===t?"m":"yds"}:{numLabel:"jumps",secondaryLabel:"metric"===t?"cm":"in"}}},{key:"renderNum",value:function(e,t){var a=e.activityData,n=this.getLabels(e.action),r=0===a.length?0:a[t].num;return s.a.createElement("span",null," ","".concat(r," ").concat(n.numLabel)," ")}},{key:"render",value:function(){var e=this.props,t=e.stats,a=e.indexDisplay,n=e.renderSecondary;return s.a.createElement("div",{className:"imageSlide ".concat(t.action)},s.a.createElement("img",{src:t.imageUrl,alt:"loading..."}),this.renderNum(t,a),n())}}]),t}(n.Component);de.contextType=_;var pe=de,he=(a(207),function(e){var t=e.direction,a=e.clickFunction,n=e.glyph,r=e.activity;return s.a.createElement("div",{className:"slide-arrow ".concat(t," ").concat(r),onClick:a},n)}),ge=2.20462,ve=1/2.20462,fe=2.54,be=1/2.54,ye=30.48;function Ee(e,t){if(!e)return"";var a=t.split(" "),n=a[1],s=t=a[0];return"english"===(e=e.toLowerCase())&&"kg"===n?(s=Math.round(parseInt(t)*ge),n="lbs"):"metric"===e&&"lbs"===n&&(s=Math.round(parseInt(t)*ve),n="kg"),s.toString()+" "+n}function Ne(e,t){if(!e)return"";var a=t.split(" "),n=t;if("english"===(e=e.toLowerCase())&&"cm"===a[1]){var s=a[0];n="".concat(parseInt(s)*be," in")}else if("metric"===e&&"ft"===a[1]){var r=parseInt(a[0]),i=parseInt(a[2]);n="".concat(Math.round(r*ye+i*fe).toString()," cm")}return n.toString()}function Se(e){var t=Math.floor(e/12),a=Math.round(e-12*t);return"".concat(t," ft ").concat(a," in")}function we(e){return e.toString().split(" ")}var ke=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getDropdownDates",value:function(e){var t=this.props.dropdownItemClick,a=[];return e.activityData.forEach(function(e,n){var r=we(new Date(e.uploadDate)),i=r[0]+", "+r[1]+" "+r[2];a.push(s.a.createElement("span",{className:"dropdown-item",key:"dropdown_"+n,id:n,onClick:t},i))}),a}},{key:"render",value:function(){var e=this.props,t=e.stats,a=e.previousSlide,n=e.nextSlide,r=e.activityIndex,i=e.displayDate,c=e.renderSecondary;return s.a.createElement("div",{className:"carousel"},s.a.createElement("div",{className:"btn-group dropdown"},s.a.createElement("button",{className:"btn btn-secondary btn-sm mt-3 dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},i()),s.a.createElement("div",{className:"dropdown-menu activities-dropdown"},this.getDropdownDates(t))),s.a.createElement("div",{className:"slideShow"},s.a.createElement(he,{direction:"left",clickFunction:a,glyph:"\u2039",activity:t.action}),s.a.createElement(pe,{stats:t,indexDisplay:r,renderSecondary:c}),s.a.createElement(he,{direction:"right",clickFunction:n,glyph:"\u203a",activity:t.action})))}}]),t}(s.a.Component),je=a(96);function Oe(e){return s.a.createElement("div",{className:"calories-circle"},s.a.createElement(je.a,{icon:"fire-alt"}),s.a.createElement("span",null,e.cals))}function xe(e){return s.a.createElement("div",{className:"duration-circle"},s.a.createElement(je.a,{icon:"clock"}),s.a.createElement("span",null,e.duration/10))}var Ce=a(23),Le=a(120),De=a.n(Le),Te=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){Ce.b.pluginService.register(De.a)}},{key:"render",value:function(){var e=this.props,t=e.labels,a=e.data,n=e.hoverLabel,r=e.yAxisMin,i=e.yAxisMax,c=e.chartTitle;return s.a.createElement("div",null,s.a.createElement(Ce.a,{data:{labels:t,datasets:[{label:n,data:a,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{maintainAspectRatio:!0,plugins:{zoom:!1},title:{text:c,display:!0,fontSize:16},legend:{display:!1,position:"right"},scales:{yAxes:[{ticks:{min:r,max:i}}]},responsive:!0}}))}}]),t}(n.Component);function Ue(e){return s.a.createElement("div",null,s.a.createElement(Ce.d,{data:{datasets:[{data:e.data,backgroundColor:e.colors}],labels:e.labels},options:{plugins:{zoom:!1},legend:{display:!0},responsive:!0,maintainAspectRatio:!1}}))}function Ie(e){for(var t=0,a=e.length,n=Math.floor(a/2),s=null;t<n;t+=1)s=e[t],e[t]=e[a-1-t],e[a-1-t]=s}function Fe(e){var t=function(t){function a(e){var t;return Object(l.a)(this,a),(t=Object(m.a)(this,Object(d.a)(a).call(this,e))).state={activityIndex:0,pastGraphLabels:[],pastGraphData:[],progressionLabels:[],progressionDate:[]},t.nextSlide=t.nextSlide.bind(Object(E.a)(t)),t.previousSlide=t.previousSlide.bind(Object(E.a)(t)),t.makePastGraphLabels=t.makePastGraphLabels.bind(Object(E.a)(t)),t.makePastGraphData=t.makePastGraphData.bind(Object(E.a)(t)),t.dropdownItemClick=t.dropdownItemClick.bind(Object(E.a)(t)),t.displayDate=t.displayDate.bind(Object(E.a)(t)),t.calcAvgNum=t.calcAvgNum.bind(Object(E.a)(t)),t.calcAvgCals=t.calcAvgCals.bind(Object(E.a)(t)),t}return Object(p.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log("mounted"),this.makePastGraphLabels(),this.makePastGraphData()}},{key:"roundToNDecimals",value:function(e,t){return parseFloat(e).toFixed(t)}},{key:"isNullOrUndefined",value:function(e){return null==e}},{key:"makePastGraphLabels",value:function(){var e=[];this.props.activityJson.activityData.forEach(function(t,a){var n=t.uploadDate,s=we(new Date(n));e.push(s[0]+", "+s[1]+" "+s[2])}),Ie(e),this.setState({pastGraphLabels:e})}},{key:"makePastGraphData",value:function(){var e=[];this.props.activityJson.activityData.forEach(function(t,a){var n=t.num;e.push(n)}),Ie(e),this.setState({pastGraphData:e})}},{key:"displayDate",value:function(){var e=this.props.activityJson,t=this.state.activityIndex;if(0===e.activityData.length)return"No uploads yet";var a=e.activityData[t].uploadDate,n=we(new Date(a));return n[0]+", "+n[1]+" "+n[2]}},{key:"dropdownItemClick",value:function(e){this.setState({activityIndex:parseInt(e.target.id)})}},{key:"calcAvgNum",value:function(){var e=this.props.activityJson.activityData,t=0,a=0;return e.forEach(function(e,n){t+=e.num,a+=1}),0===a?0:Math.round(t/a)}},{key:"calcAvgCals",value:function(){var e=this.props.activityJson.activityData,t=0,a=0;return e.forEach(function(e,n){t+=e.calories,a+=1}),0===a?0:Math.round(t/a)}},{key:"previousSlide",value:function(){var e=this.props.activityJson.activityData,t=Math.min(this.state.activityIndex+1,e.length-1);this.setState({activityIndex:t})}},{key:"nextSlide",value:function(){var e=Math.max(this.state.activityIndex-1,0);this.setState({activityIndex:e})}},{key:"render",value:function(){var t=this.state,a=t.activityIndex,n=t.pastGraphData,r=t.pastGraphLabels;return s.a.createElement("div",null,s.a.createElement(e,Object.assign({pastGraphData:n,pastGraphLabels:r,activityIndex:a,dropdownItemClick:this.dropdownItemClick,displayDate:this.displayDate,nextSlide:this.nextSlide,previousSlide:this.previousSlide,calcAvgNum:this.calcAvgNum,calcAvgCals:this.calcAvgCals,isNullOrUndefined:this.isNullOrUndefined,roundToNDecimals:this.roundToNDecimals},this.props)))}}]),a}(n.Component);return t.contextType=_,t}var Pe=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.labels,a=e.data,n=e.hoverLabel,r=e.yAxisMin,i=e.yAxisMax,c=e.displayDate;return console.log(t,a),s.a.createElement("div",null,s.a.createElement(Ce.c,{data:{labels:t,datasets:[{label:n,data:a,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{maintainAspectRatio:!0,plugins:{zoom:!1},title:{text:"pace on ".concat(c()),display:!0,fontSize:16},legend:{display:!1,position:"right"},scales:{yAxes:[{ticks:{min:r,max:i}}]},responsive:!0}}))}}]),t}(n.Component),Me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={paceLabels:[],paceDate:[]},a.estimateDistanceRun=a.estimateDistanceRun.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("mounted")}},{key:"makeDoughnutData",value:function(){var e=0,t=0,a=0;if(this.context.runJson.activityData.forEach(function(n,s){n.paces.forEach(function(n,s){n&&!isNaN(n)?(n>2.314?e+=1:n>5&&n<2.314&&(t+=1),a+=1):console.log("this pace entry is corrupted somehow...")})}),0===a)return[0,0,0];var n=e/a,s=t/a;return[n,s,1-(n+s)]}},{key:"calcAvgPace",value:function(){var e=this.context.runJson.activityData,t=0,a=0;return e.forEach(function(e,n){e.paces.forEach(function(e,n){t+=e,a+=1})}),0===a?0:t/a}},{key:"estimateDistanceRun",value:function(){this.context.settings.unitSystem;return"estimated dist"}},{key:"makePaceLabels",value:function(e,t){for(var a=Math.floor(t/e.length),n=Array(e.length),s=0;s<e.length+1;s++)n[s]="".concat(Math.floor(a*s/10)," sec");return n}},{key:"render",value:function(){var e=this.context.runJson,t=this.props,a=t.activityIndex,n=t.pastGraphData,r=t.pastGraphLabels,i=t.dropdownItemClick,c=t.displayDate,o=t.nextSlide,l=t.previousSlide,u=t.calcAvgNum,m=t.calcAvgCals,d=t.isNullOrUndefined,p=e.activityData[a];return s.a.createElement("div",{className:"run-container"},s.a.createElement(ke,{stats:e,previousSlide:l,nextSlide:o,activityIndex:a,displayDate:c,dropdownItemClick:i,renderSecondary:this.estimateDistanceRun}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(Oe,{cals:d(p)?0:p.calories})),s.a.createElement("div",{className:"col-4",align:"center"}),s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(xe,{duration:d(p)?0:p.time}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(Te,{chartTitle:"Previous Runs",labels:r,data:n,hoverLabel:"Steps",activity:"Runs",yAxisMin:0,yAxisMax:Math.max.apply(Math,Object(v.a)(n))}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(Pe,{activity:"Pace Progression",displayDate:c,data:[0].concat(Object(v.a)(p.paces)),labels:this.makePaceLabels(p.paces,p.time),hoverLabel:"Pace",yAxisMin:0,yAxisMax:Math.max.apply(Math,Object(v.a)(p.paces))+2}))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Steps per Session"),u()))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Pace per Session"),this.calcAvgPace())))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Cals per Session"),m()))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement(Ue,{labels:["% run","% walk","% rest"],data:this.makeDoughnutData(),colors:["rgba(102, 255, 102, 0.4)","rgba(255, 255, 0, 0.4)","rgba(255, 51, 0, 0.4)"]}))))))}}]),t}(n.Component);Me.contextType=_;var Ae=Fe(Me),Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).getCurrentBestHeight=a.getCurrentBestHeight.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"calcAvgHeight",value:function(){var e=this.context.jumpJson.activityData,t=0,a=0;return e.forEach(function(e,n){e.heights.forEach(function(e,n){t+=e,a+=1})}),0===a?0:parseFloat(t/a).toFixed(2)}},{key:"getCurrentBestHeight",value:function(){var e=this.context.settings.unitSystem,t=this.context.jumpJson.activityData,a=this.props.activityIndex;if(0===t.length)return null;var n,r=t[a],i=Math.max.apply(Math,Object(v.a)(r.heights));return i="metric"===e?(n=i,parseFloat("metric"===e?n*fe:n*be).toFixed(2)):i,s.a.createElement("span",null,"highest: "+i+("metric"===e?" cm":" in"))}},{key:"render",value:function(){var e=this.context,t=e.jumpJson,a=e.settings,n=e.bests,r=a.unitSystem,i=this.props,c=i.activityIndex,o=i.pastGraphData,l=i.pastGraphLabels,u=i.dropdownItemClick,m=i.displayDate,d=i.nextSlide,p=i.previousSlide,h=i.calcAvgNum,g=i.calcAvgCals,v=i.isNullOrUndefined,f=t.activityData[c];return console.log(o),s.a.createElement("div",{className:"jump-container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(ke,{stats:t,previousSlide:p,nextSlide:d,activityIndex:c,displayDate:m,dropdownItemClick:u,renderSecondary:this.getCurrentBestHeight}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(Oe,{cals:v(f)?0:f.calories})),s.a.createElement("div",{className:"col-4",align:"center"}),s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(xe,{duration:v(f)?0:f.time}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(Te,{chartTitle:"Previous Sessions",labels:l,data:o,hoverLabel:"Jumps",activity:"Jumps",yAxisMin:0,yAxisMax:20}))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Jumps per Session"),h()))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg height per Session"),this.calcAvgHeight()+" "+("metric"===r?"cm":"in"))))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Cals per Session"),g()))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Overall Best"),n.jump)))))}}]),t}(n.Component);Re.contextType=_;var Je=Fe(Re);function qe(e){return s.a.createElement("div",{className:"mt-3"},s.a.createElement(h.b,{className:"btn btn-primary",id:"details",to:e.detailsLink},"details"))}function Be(e){return s.a.createElement("div",null,s.a.createElement(Ce.d,{data:{datasets:[{data:e.data,backgroundColor:e.colors}],labels:e.labels},options:{legend:{display:!1},responsive:!0,maintainAspectRatio:!1}}))}var He=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a.calculateDistance=a.calculateDistance.bind(Object(E.a)(a)),a.calcAvgSpeed=a.calcAvgSpeed.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"calculateDistance",value:function(e){var t=this.context.settings,a=t.swimLap,n=t.unitSystem,s=this.props,r=s.roundToNDecimals,i=s.isNullOrUndefined;if(n=n.toLowerCase(),i(e))return 0;var c=e.num;if("50 m"===a){var o=50*c;return"metric"===n?o:r(o*(1/1.09361),2)}if("25 m"===a){var l=25*c;return"metric"===n?l:r(l*(1/1.09361),2)}var u=25*c;return"english"===n?u:r(u*(1/.9144),2)}},{key:"calcAvgSpeed",value:function(){var e=this.props.activityJson.activityData,t=this.context.settings,a=t.swimLap,n=t.unitSystem,s=this.props,r=s.roundToNDecimals;if((0,s.isNullOrUndefined)(e))return 0;var i=a.split(" "),c=0,o=0;e.forEach(function(e,t){var a=e.lapTimes,n=e.num;o+=a.reduce(function(e,t){return e+t},0),c=i[0]*n});var l=0===c?0:c/o;return"yd"===i[1]?"metric"===n?r(l*(1/.9144),2):l:"metric"===n?l:r(l*(1/1.09361),2)}},{key:"calcAvgTimePerLap",value:function(){var e=this.props.activityJson.activityData,t=this.props,a=t.roundToNDecimals;if((0,t.isNullOrUndefined)(e))return 0;var n=0,s=0;return e.forEach(function(e,t){n+=e.lapTimes.reduce(function(e,t){return e+t},0),s+=e.num}),a(n/s,2)}},{key:"makeDoughnutData",value:function(){var e=this.props.activityJson.activityData;if((0,this.props.isNullOrUndefined)(e))return 0;var t=0,a=0,n=0,s=0;return e.forEach(function(e,r){e.strokes.forEach(function(e,r){var i=e.toLowerCase();"u"===i?t+=1:"b"===i?a+=1:"r"===i?n+=1:"f"===i&&(s+=1)})}),[t,a,n,s]}},{key:"render",value:function(){var e=this.context,t=e.settings,a=e.swimJson,n=t.unitSystem,r=this.props,i=r.activityIndex,c=r.pastGraphData,o=r.pastGraphLabels,l=r.dropdownItemClick,u=r.displayDate,m=r.nextSlide,d=r.previousSlide,p=r.calcAvgNum,h=r.calcAvgCals,g=r.isNullOrUndefined,v=a.activityData[i];return s.a.createElement("div",{className:"swim-container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(ke,{stats:a,previousSlide:d,nextSlide:m,activityIndex:i,displayDate:u,dropdownItemClick:l,renderSecondary:this.calculateDistance}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(Oe,{cals:g(v)?0:v.calories})),s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(qe,{detailsLink:"/app/swimDetails"})),s.a.createElement("div",{className:"col-4",align:"center"},s.a.createElement(xe,{duration:g(v)?0:v.time}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(Te,{chartTitle:"Previous Swims",labels:o,data:c,hoverLabel:"Laps",activity:"Swims",yAxisMin:0,yAxisMax:50}))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Laps per Session"),p()))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Speed per Lap"),this.calcAvgSpeed()+" "+("metric"===n?"m/s":"yd/s"))))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Time per Lap"),this.calcAvgTimePerLap()+" seconds"))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Strokes per Lap"),"avg strokes")))),s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Avg Cals per Session"),h()))),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},"Stroke Distribution"),s.a.createElement(Be,{data:this.makeDoughnutData(),labels:["laps fly","laps back","laps breast","laps free"],colors:["rgba(102, 255, 102, 0.4)","rgba(255, 255, 0, 0.4)","rgba(255, 51, 0, 0.4)","rgba(255, 153, 0, 0.4)"]}))))))}}]),t}(n.Component);He.contextType=_;var Ge=Fe(He),ze=(a(299),a(300),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={display:!0,activityDisplay:""},a.renderActivity=a.renderActivity.bind(Object(E.a)(a)),a.changeActivityDisplay=a.changeActivityDisplay.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"renderActivity",value:function(){var e=this.state.activityDisplay,t=this.context,a=t.runJson,n=t.jumpJson,r=t.swimJson;return"run"===e?s.a.createElement(Ae,{id:"run",activityJson:a}):"jump"===e?s.a.createElement(Je,{id:"jump",activityJson:n}):"swim"===e?s.a.createElement(Ge,{id:"swim",activityJson:r}):s.a.createElement("div",{className:"no-activity-container"}," ",s.a.createElement("span",null,"pick an activity")," ")}},{key:"changeActivityDisplay",value:function(e){this.setState({activityDisplay:e,showTransition:!0})}},{key:"render",value:function(){var e=this,t=this.state.activityDisplay;return s.a.createElement("div",{className:"fitness-container"},s.a.createElement("div",{className:"card-header fitness-header"},"Activity:"),s.a.createElement("nav",{className:"navbar navbar-expand navbar-text sticky bg-light"},s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",{className:"nav-item mx-4"},s.a.createElement("span",{className:"run-link nav-link ".concat("run"===t?"active":""),onClick:function(){e.changeActivityDisplay("run")}},"Run")),s.a.createElement("li",{className:"nav-item mx-4"},s.a.createElement("span",{className:"swim-link nav-link ".concat("swim"===t?"active":""),onClick:function(){e.changeActivityDisplay("swim")}},"Swim")),s.a.createElement("li",{className:"nav-item mx-4"},s.a.createElement("span",{className:"jump-link nav-link ".concat("jump"===t?"active":""),onClick:function(){e.changeActivityDisplay("jump")}},"Jump")))),this.renderActivity())}}]),t}(n.Component));ze.contextType=_;var _e=ze;a(144),a(301);var We=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{style:{overflowX:"scroll",width:"300px"}},s.a.createElement(Ce.c,{data:{labels:this.props.labels,datasets:[{data:(e=this.props.data,e.map(function(e,t){return{x:t,y:e}})),backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{scales:{xAxes:[{type:"linear",ticks:{stepSize:1,maxRotation:0},position:"bottom",scaleLabel:{display:!0,labelString:"Jump"}}],yAxes:[{type:"linear"}]},animation:{easing:"easeInOutSine",duration:"1500"},maintainAspectRatio:!1,title:{text:"Date",display:!0,fontSize:16},legend:{display:!1,position:"right"},responsive:!0,plugins:{zoom:{pan:{enabled:!0,mode:"x",speed:2,threshold:10},zoom:{enabled:!0,mode:"x",limits:{max:10,min:.5}}}}}}));var e}}]),t}(n.Component),Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={labels:[],data:[]},a.setJumpData=a.setJumpData.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setJumpData()}},{key:"setJumpData",value:function(){var e=this,t=new Headers,a=Object(N.getToken)(N.localStorageKey);t.append("authorization","Bearer ".concat(a)),t.append("activity","run"),fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/data",{method:"GET",headers:t}).catch(function(e){throw e}).then(function(e){return e.json()}).then(function(t){if(t.success){var a=e.makeLabels(t),n=e.getData(t);e.setState({labels:a,data:n})}else alert(t.message)})}},{key:"makeLabels",value:function(e){for(var t=[],a=1;a<e.heights.length+1;a++)t.push(a);return t}},{key:"getData",value:function(e){var t=[];return e.heights.forEach(function(e){t.push(e)}),t}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(We,{labels:this.state.labels,data:this.state.data}),s.a.createElement(Te,{labels:this.state.labels,data:this.state.data}))}}]),t}(n.Component);Ke.contextType=_;var Ve=Ke,Ye=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(Ce.a,{data:{labels:this.props.labels,datasets:[{label:"quantity",data:this.props.data,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{maintainAspectRatio:!0,title:{text:"Title",display:!0,fontSize:16},legend:{display:!0,position:"right"},responsive:!0}})}}]),t}(n.Component),Ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={labels:[],data:[]},a.setJumpData=a.setJumpData.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setJumpData()}},{key:"setJumpData",value:function(){var e=this,t=new Headers,a=Object(N.getToken)(N.localStorageKey);t.append("authorization","Bearer ".concat(a)),t.append("activity","jump"),fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/data",{method:"GET",headers:t}).catch(function(e){throw e}).then(function(e){return e.json()}).catch(function(e){throw e}).then(function(t){if(t.success){var a=t.activityData,n=e.makeLabels(a),s=e.getData(a);e.setState({labels:n,data:s})}else alert(t.message)})}},{key:"makeLabels",value:function(e){for(var t=[],a=1;a<e.heights.length+1;a++)t.push(a);return t}},{key:"getData",value:function(e){var t=[];return e.heights.forEach(function(e){t.push(e)}),t}},{key:"render",value:function(){return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement(We,{labels:this.state.labels,data:this.state.data}),s.a.createElement(Te,{labels:this.state.labels,data:this.state.data}),s.a.createElement(h.b,{className:"routeButton",id:"backFromJumpDetails",to:"/graph",style:{marginTop:"20px"}},"Back"))}}]),t}(n.Component),Qe=a(168),Xe=a.n(Qe),$e=(a(145),a(97)),et=(a(303),"https://us-central1-athlos-live.cloudfunctions.net/athlos-server"),tt="".concat(et,"/updateProfile"),at="".concat(et,"/checkDuplicatePic"),nt="".concat(et,"/uploadProfilePic"),st="./default_profile.png";function rt(e){var t=Object(n.useContext)(_),a=k.b({updateFirstName:k.d().max(15,"Must be 15 characters or less").required("Cannot be empty"),updateLastName:k.d().max(20,"Must be 20 characters or less").required("Cannot be empty"),updateBio:k.d().max(250,"Must be 250 characters or less"),updateAge:k.a().positive("Must be greater than 0").integer("Must be a whole number"),updateLocation:k.d().max(250,"Must be 250 characters or less"),updateGender:k.d().max(50,"Must be 50 characters or less"),updateHeightCm:k.a().positive("Must be greater than 0").integer("Must be a whole number"),updateHeightIn:k.a().positive("Must be greater than 0").integer("Must be a whole number"),updateHeightFt:k.a().positive("Must be greater than 0").integer("Must be a whole number"),updateWeight:k.a().positive("Must be greater than 0").integer("Must be a whole number")});function r(){return(r=Object(y.a)(b.a.mark(function e(a){var n,s,r,i,c,o,l,u,m,d,p,h,g,v,f,y,E,S,w,k,j,O,x,C;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(alert("updating"),n=a.updateFirstName,s=a.updateLastName,r=a.updateBio,i=a.updateLocation,c=a.updateGender,o=a.updateHeightFt,l=a.updateHeightIn,u=a.updateHeightCm,m=a.updateWeight,d=a.updateAge,p=a.file,h=t.profilePicture,g=(g=t.settings.unitSystem).toLowerCase(),v=Object(N.getToken)(),(f=new FormData).append("profilePic",p),f.append("currImgHash",h.etag),!p){e.next=30;break}return e.next=14,fetch(at,{method:"POST",body:f});case 14:return y=e.sent,e.next=17,y.json();case 17:if((E=e.sent).success){e.next=21;break}return alert(E.message),e.abrupt("return");case 21:return(S=new Headers).append("authorization","Bearer ".concat(v)),e.next=25,fetch(nt,{method:"POST",headers:S,body:f});case 25:return w=e.sent,e.next=28,w.json();case 28:e.sent.success&&alert("successfully updated profile picture!");case 30:return k="".concat(m,"metric"===g?" kg":" lbs"),j="metric"===g?"".concat(u," cm"):"".concat(o," ft ").concat(l," in"),O={firstName:n,lastName:s,bio:r,location:i,gender:c,weight:k,height:j,age:d,userToken:v},e.next=35,fetch(tt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});case 35:return x=e.sent,e.next=38,x.json();case 38:C=e.sent,console.log("aioajweif",C),C.success?(alert("successfully updated profile"),window.location.reload()):alert(C.message);case 41:case"end":return e.stop()}},e)}))).apply(this,arguments)}var i=t.firstName,c=t.lastName,o=t.bio,l=t.age,u=t.location,m=t.gender,d=t.height,p=t.weight,h=t.settings.unitSystem;return p=Ee(h,p),d=Ne(h,d),console.log(t),t.mounted?s.a.createElement("div",{className:"edit-profile-container"},s.a.createElement(w.d,{initialValues:{updateFirstName:i,updateLastName:c,updateBio:o,updateAge:l,updateLocation:u,updateGender:m,updateHeightCm:"metric"===h?d.split(" ")[0]:"",updateHeightIn:"english"===h?Se(d).split(" ")[0]:"",updateHeightFt:"english"===h?Se(d).split(" ")[2]:"",updateWeight:p?p.split(" ")[0]:""},validationSchema:a,onSubmit:function(e,t){var a=t.setSubmitting;console.log(e),function(e){r.apply(this,arguments)}(e),a(!1)}},function(a){var n=a.errors,r=a.touched,i=a.setFieldValue;return s.a.createElement(w.c,null,s.a.createElement("div",{className:"prof-pic-container"},s.a.createElement("img",{src:t.profilePicture.profileURL,width:"300",height:"300",alt:st}),s.a.createElement("label",{htmlFor:"submit-prof-pic",className:"custom-file-upload"},s.a.createElement("input",{id:"submit-prof-pic",type:"file",onChange:function(e){i("file",e.currentTarget.files[0])},accept:"image/x-png,image/jpeg"}),"Upload an Image")),x("First Name","text","updateFirstName","field",n.updateFirstName,r.updateFirstName),x("Last Name","text","updateLastName","field",n.updateLastName,r.updateLastName),function(e,t,a,n,r){return s.a.createElement("div",{className:"field-container group"},s.a.createElement("label",{className:"label",htmlFor:t},e),s.a.createElement(w.b,{name:t,className:a,type:"text",as:"textarea",style:n&&r?j:null}),s.a.createElement(w.a,{style:O,name:t}))}("Bio","updateBio","field",n.updateBio,r.updateBio),x("Gender","text","updateGender","field",n.updateGender,r.updateGender),x("Age","text","updateAge","field",n.updateAge,r.updateAge),x("Location","text","updateLocation","field",n.updateLocation,r.updateLocation),function(e,t,a,n){return s.a.createElement("div",{className:"field-container"},s.a.createElement("label",{htmlFor:"updateWeight"},"Weight"),s.a.createElement("div",{className:"weight-container"},s.a.createElement(w.b,{style:n.updateWeight?j:null,name:e,className:t,type:"number"}),s.a.createElement("span",{className:"weight-units"},"english"===a?"lbs":"kg")),s.a.createElement(w.a,{name:e},function(e){return s.a.createElement("div",{style:O},e)}))}("updateWeight","field",h,n),function(e,t,a,n){return"English"===a?s.a.createElement("div",{className:"height-wrapper"},s.a.createElement("label",{htmlFor:"height"},"Height"),s.a.createElement("div",{id:"height",className:"field-container"},s.a.createElement("div",{className:"height-container"},s.a.createElement(w.b,{style:n.updateHeightFt?j:null,name:"updateHeightFt",className:t,type:"number"}),s.a.createElement("span",{className:"height-units ft"},"ft")),s.a.createElement(w.a,{name:"updateHeightFt"},function(e){return s.a.createElement("div",{style:O},e)}),s.a.createElement("div",{className:"height-container"},s.a.createElement(w.b,{style:n.updateHeightIn?j:null,name:"updateHeightIn",className:t,type:"number"}),s.a.createElement("span",{className:"height-units in"},"in")),s.a.createElement(w.a,{name:"updateHeightIn"},function(e){return s.a.createElement("div",{style:O},e)}))):s.a.createElement("div",{className:"height-wrapper"},s.a.createElement("label",{htmlFor:"height"},"Height"),s.a.createElement("div",{className:"field-container"},s.a.createElement("div",{className:"height-container"},s.a.createElement(w.b,{style:n.updateHeightCm?j:null,name:"updateHeightCm",className:t,type:"number"}),s.a.createElement("span",{className:"height-units cm"},"cm")),s.a.createElement(w.a,{name:"updateHeightCm"},function(e){return s.a.createElement("div",{style:O},e)})))}(0,"field",h,n),s.a.createElement("div",{className:"submit-container"},s.a.createElement("input",{type:"submit",className:"button",value:"Update Profile",id:"update-button"}),s.a.createElement("div",{className:"cancel",onClick:e.closePopup},"Cancel")))})):s.a.createElement("div",{className:"profile-loading-container"},s.a.createElement("span",null,"loading..."))}var it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={bestJump:"",bestSwim:"",bestRun:"",editProfile:!1,expandBio:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("profile mounted")}},{key:"renderBio",value:function(){var e=this,t=this.context.bio;return t?s.a.createElement(Xe.a,{lines:3,more:"Show more",less:"Show less",anchorClass:"",onClick:function(){e.setState({expandBio:!0})},expanded:this.state.expandBio},t):s.a.createElement("p",null,"No bio yet")}},{key:"renderHeight",value:function(){var e=this.context,t=e.height,a=e.settings.unitSystem;if(a=a.toLowerCase(),!t)return s.a.createElement("p",null,"set height");var n=t;return"english"===a?n=Ne("english",t):"metric"===a?n=Ne("metric",t):console.error(new Error("unitsystem is not 'english' or 'metric'...")),n}},{key:"renderWeight",value:function(){var e=this.context,t=e.weight,a=e.settings.unitSystem,n=t;return"english"===(a=a.toLowerCase())?n=Ee("english",t):"metric"===a?n=Ee("metric",t):console.error(new Error("unitsystem is not 'english' or 'metric'...")),n}},{key:"renderBests",value:function(){}},{key:"renderNumFriends",value:function(){var e=this.context.friends;return s.a.createElement("p",null,"friends: "+e.length)}},{key:"renderPopup",value:function(){var e=s.a.createElement("div",{className:"edit-btn-container"},s.a.createElement("i",{className:"far"},"\uf044"),s.a.createElement("span",{className:"edit-btn"},"Edit Profile"));return s.a.createElement($e.a,{trigger:e,modal:!0},function(e){return s.a.createElement("div",{className:"popup-modal"},s.a.createElement("div",{className:"popup-close",onClick:e},"\xd7"),s.a.createElement("h4",{className:"popup-header"}," Edit your profile "),s.a.createElement("div",{className:"content"},s.a.createElement(rt,{closePopup:e})))})}},{key:"render",value:function(){var e=this.context;return e.mounted?s.a.createElement("div",{className:"profile-container"},s.a.createElement("div",{className:"top-half"},this.renderPopup(),s.a.createElement("div",{className:"img-container mt-2"},s.a.createElement("img",{className:"profile-pic",src:e.profilePicture.profileURL,height:"75%",width:"75%",alt:"./default_profile.png"})),s.a.createElement("div",{className:"name-container"},s.a.createElement("span",{className:"fname"},e.firstName),s.a.createElement("span",{className:"lname"},e.lastName)),s.a.createElement("div",{className:"info-container m-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,"Age"),s.a.createElement("span",null,e.age)),s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,"Height"),s.a.createElement("span",null,this.renderHeight())),s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,"Weight"),s.a.createElement("span",null,this.renderWeight())))),s.a.createElement("div",{className:"bio-container m-3"},s.a.createElement("span",null,this.renderBio()))),s.a.createElement("div",{className:"bot-half"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},"total steps"),s.a.createElement("div",{className:"col-6"},"total mins")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},"total laps"),s.a.createElement("div",{className:"col-6"},"hightest jump")))):s.a.createElement("div",{className:"profile-loading-container"},s.a.createElement("span",null,"loading..."))}}]),t}(n.Component);it.contextType=_;var ct=Object(g.g)(it),ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={errorMsgs:[],settings:{},firstName:"",lastName:"",isFriend:!1,bio:"",age:0,height:"",weight:"",totals:{},bests:{},profilePicture:{},friends:[]},a.getBasicInfo=a.getBasicInfo.bind(Object(E.a)(a)),a.getFriends=a.getFriends.bind(Object(E.a)(a)),a.getTotalsAndBests=a.getTotalsAndBests.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getBasicInfo",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r,i,c,o,l,u;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.settings.seeBasicInfo,a=this.state.isFriend,n=this.props.match.params.username,!("everyone"===t||"friends"===t&&a)){e.next=16;break}return e.next=6,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getSearchUserBasicInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n})});case 6:return s=e.sent,e.next=9,s.json();case 9:r=e.sent,i=r.bio,c=r.weight,o=r.height,l=r.age,u=r.gender,this.setState({bio:i,weight:c,height:o,age:l,gender:u});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getFriends",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.settings.seeFriendsList,a=this.state.isFriend,n=this.props.match.params.username,!("everyone"===t||"friends"===t&&a)){e.next=12;break}return e.next=6,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getSearchUserFriends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n})});case 6:return s=e.sent,e.next=9,s.json();case 9:r=e.sent,i=r.friends,this.setState({friends:i});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTotalsAndBests",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r,i,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.settings.seeFitness,a=this.state.isFriend,n=this.props.match.params.username,!("everyone"===t||"friends"===t&&a)){e.next=13;break}return e.next=6,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getSearchUserFitness",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n})});case 6:return s=e.sent,e.next=9,s.json();case 9:r=e.sent,i=r.bests,c=r.totals,this.setState({bests:i,totals:c});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r,i,c,o,l,u,m;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mounting search profile"),t=this.props.match.params.username,a=Object(N.getToken)(),n={searchUserName:t,userToken:a},e.prev=4,e.next=7,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getSearchUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:return s=e.sent,e.next=10,s.json();case 10:if(r=e.sent,i=r.success,c=r.settings,o=r.firstName,l=r.lastName,u=r.isFriend,m=r.profilePicture,i){e.next=20;break}return this.setState(function(e){return{errorMsgs:[].concat(Object(v.a)(e.errorMsgs),["Something went wrong. Please refresh and try again"])}}),e.abrupt("return");case 20:return this.setState({settings:c,firstName:o,lastName:l,isFriend:u,profilePicture:m}),e.next=23,Promise.all([this.getBasicInfo(),this.getTotalsAndBests(),this.getFriends()]);case 23:e.next=31;break;case 25:e.prev=25,e.t0=e.catch(4),console.log("poswjefioawef"),console.error(e.t0),alert("Something went wrong. Please refresh and try again"),this.setState(function(t){return{errorMsgs:[].concat(Object(v.a)(t.errorMsgs),[e.t0.toString()])}});case 31:case"end":return e.stop()}},e,this,[[4,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"showError",value:function(e,t){var a=this;return s.a.createElement(I,{msg:e,key:t,onClose:function(){a.setState(function(t){return{errorMsgs:new Set(Object(v.a)(t.errorMsgs).filter(function(t){return t!==e}))}})}})}},{key:"displayErrors",value:function(){return Object(v.a)(this.state.errorMsgs).map(this.showError)}},{key:"render",value:function(){console.log("search profile has rendered");var e=this.context,t=this.state,a=t.firstName,n=t.lastName,r=t.age,i=t.height,c=t.bio,o=t.weight,l=t.totals,u=t.bests,m=t.profilePicture;return e.mounted?s.a.createElement("div",{className:"profile-container"},s.a.createElement("div",{className:"top-half"},s.a.createElement("div",{className:"img-container mt-2"},s.a.createElement("img",{className:"profile-pic",src:m.profileURL,height:"75%",width:"75%",alt:"./default_profile.png"})),s.a.createElement("div",{className:"name-container"},s.a.createElement("span",{className:"fname"},a),s.a.createElement("span",{className:"lname"},n)),s.a.createElement("div",{className:"info-container m-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,"Age"),s.a.createElement("span",null,r)),s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,"Height"),s.a.createElement("span",null,i)),s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,"Weight"),s.a.createElement("span",null,o)))),s.a.createElement("div",{className:"bio-container m-3"},s.a.createElement("span",null,c))),s.a.createElement("div",{className:"bot-half"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h5",null,"Total Steps"),s.a.createElement("span",null,l.steps)),s.a.createElement("div",{className:"col-6"},s.a.createElement("h5",null,"Total Min"),s.a.createElement("span",null,l.minutes))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("h5",null,"Total Laps"),s.a.createElement("span",null,l.laps)),s.a.createElement("div",{className:"col-6"},s.a.createElement("h5",null,"Highest Jump"),s.a.createElement("span",null,u.jump))))):s.a.createElement("div",{className:"profile-loading-container"},s.a.createElement("span",null,"loading..."))}}]),t}(n.Component);ot.contextType=_;var lt=Object(g.g)(ot),ut=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.context;return this.props.match.params.username===e.username?s.a.createElement(ct,null):s.a.createElement(lt,null)}}]),t}(n.Component);ut.contextType=_;var mt=Object(g.g)(ut),dt=(a(304),a(73)),pt=a.n(dt);function ht(e){return s.a.createElement("div",{className:"settings-dropdown"},s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.dropdownText),s.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},s.a.createElement("span",{className:"dropdown-item",onClick:e.onSelect},"English"),s.a.createElement("span",{className:"dropdown-item",onClick:e.onSelect},"metric"))))}function gt(e){return s.a.createElement("div",{className:"settings-dropdown"},s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.dropdownText),s.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},s.a.createElement("span",{className:"dropdown-item",href:"#",onClick:e.onSelect},"25 yd"),s.a.createElement("span",{className:"dropdown-item",href:"#",onClick:e.onSelect},"25 m"),s.a.createElement("span",{className:"dropdown-item",href:"#",onClick:e.onSelect},"50 m"),s.a.createElement("span",{className:"dropdown-item",href:"#",onClick:e.onCustomSwimClick},"Custom"))))}function vt(e){return s.a.createElement("div",{className:"settings-dropdown"},s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.dropdownText),s.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},s.a.createElement("span",{className:"dropdown-item",onClick:e.onSelect},"everyone"),s.a.createElement("span",{className:"dropdown-item",onClick:e.onSelect},"friends"),s.a.createElement("span",{className:"dropdown-item",onClick:e.onSelect},"just me"))))}function ft(e){return s.a.createElement($e.a,{open:e.showCustomSwimSettings,closeOnDocumentClick:!0,onClose:e.closeCustomSwimSettings},s.a.createElement("div",{className:"popup-modal"},s.a.createElement("div",{className:"close",onClick:e.closeCustomSwimSettings},"\xd7"),s.a.createElement("div",{className:"popup-header"},"Set Custom Pool Length"),s.a.createElement("div",{className:"popup-content"},s.a.createElement("form",{onSubmit:e.setCustomSwimLength},s.a.createElement("div",{className:"input-group mt-3"},s.a.createElement("input",{type:"number",className:"form-control",onChange:e.onCustomSwimLengthChange,required:!0,min:"5",max:"100",step:".1"}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle unit-select",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.customSwimUnits),s.a.createElement("div",{className:"dropdown-menu"},s.a.createElement("span",{className:"dropdown-item",onClick:e.setCustomSwimUnits},"Yards"),s.a.createElement("span",{className:"dropdown-item",onClick:e.setCustomSwimUnits},"Meters")))),s.a.createElement("div",{className:"save-custom-swim-container"},s.a.createElement("input",{type:"submit",className:"save-custom-swim-btn mt-3 btn btn-primary",value:"Done"}))))))}var bt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={showCustomSwimSettings:!1,customSwimUnits:"Yards",currCustomSwimLength:25,customSwimLength:"",friendsListChoice:"",fitnessChoice:"",basicInfoChoice:"",unitDisplayChoice:"",swimLengthChoice:"",errorMsgs:"",successMsgs:""},a.saveSettings=a.saveSettings.bind(Object(E.a)(a)),a.openCustomSwimSettings=a.openCustomSwimSettings.bind(Object(E.a)(a)),a.closeCustomSwimSettings=a.closeCustomSwimSettings.bind(Object(E.a)(a)),a.onCustomSwimClick=a.onCustomSwimClick.bind(Object(E.a)(a)),a.setFriendsListChoice=a.setFriendsListChoice.bind(Object(E.a)(a)),a.setFitnessChoice=a.setFitnessChoice.bind(Object(E.a)(a)),a.setBasicInfoChoice=a.setBasicInfoChoice.bind(Object(E.a)(a)),a.setUnitDisplayChoice=a.setUnitDisplayChoice.bind(Object(E.a)(a)),a.setSwimLengthChoice=a.setSwimLengthChoice.bind(Object(E.a)(a)),a.setCustomSwimUnits=a.setCustomSwimUnits.bind(Object(E.a)(a)),a.onCustomSwimLengthChange=a.onCustomSwimLengthChange.bind(Object(E.a)(a)),a.setCustomSwimLength=a.setCustomSwimLength.bind(Object(E.a)(a)),a.displayErrors=a.displayErrors.bind(Object(E.a)(a)),a.displaySuccesses=a.displaySuccesses.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){pt()('[data-toggle="tooltip"]').tooltip()}},{key:"componentDidUpdate",value:function(){pt()('[data-toggle="tooltip"]').tooltip()}},{key:"saveSettings",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r,i,c,o,l,u;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("saving settings..."),t=this.state,a=t.friendsListChoice,n=t.fitnessChoice,s=t.basicInfoChoice,r=t.unitDisplayChoice,i=t.swimLengthChoice,c=this.context.settings,a=a||c.seeFriendsList,n=n||c.seeFitness,s=s||c.seeBasicInfo,r=r||c.unitSystem,i=i||c.swimLap,console.log(a,n,s,r,i),o=Object(N.getToken)(N.storageKey)){e.next=14;break}return alert("Your session has expired. Please login again."),this.props.history.push("/"),e.abrupt("return");case 14:return e.prev=14,e.next=17,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/updateSettings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userToken:o,seeFriendsList:a,seeFitness:n,seeBasicInfo:s,unitSystem:r,swimLap:i})});case 17:return l=e.sent,e.next=20,l.json();case 20:if(!(u=e.sent).success){e.next=26;break}this.props.updateUserInfo(),this.setState({successMsgs:"Successfully saved your new settings"}),e.next=27;break;case 26:throw Error(u.messages.msg);case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(14),console.error(e.t0),this.setState({errorMsgs:"Something went wrong when trying to save your settings. Please try again later."});case 33:case"end":return e.stop()}},e,this,[[14,29]])}));return function(){return e.apply(this,arguments)}}()},{key:"setFriendsListChoice",value:function(e){this.setState({friendsListChoice:e.currentTarget.textContent})}},{key:"setFitnessChoice",value:function(e){this.setState({fitnessChoice:e.currentTarget.textContent})}},{key:"setBasicInfoChoice",value:function(e){this.setState({basicInfoChoice:e.currentTarget.textContent})}},{key:"setUnitDisplayChoice",value:function(e){this.setState({unitDisplayChoice:e.currentTarget.textContent})}},{key:"openCustomSwimSettings",value:function(){this.setState({showCustomSwimSettings:!0})}},{key:"closeCustomSwimSettings",value:function(){this.setState({showCustomSwimSettings:!1})}},{key:"onCustomSwimClick",value:function(){this.setState({showCustomSwimSettings:!0})}},{key:"setSwimLengthChoice",value:function(e){this.setState({swimLengthChoice:e.currentTarget.textContent})}},{key:"setCustomSwimUnits",value:function(e){this.setState({customSwimUnits:e.currentTarget.textContent})}},{key:"onCustomSwimLengthChange",value:function(e){this.setState({currCustomSwimLength:e.target.value})}},{key:"setCustomSwimLength",value:function(){var e=this.state,t=e.customSwimUnits,a=e.currCustomSwimLength;t="Meters"===t?"m":"yds",this.setState({swimLengthChoice:"".concat(a," ").concat(t),showCustomSwimSettings:!1})}},{key:"renderDropDown",value:function(e,t){var a=this.state,n=a.friendsListChoice,r=a.fitnessChoice,i=a.basicInfoChoice,c=a.unitDisplayChoice,o=a.swimLengthChoice;return"friends list"===e?s.a.createElement(vt,{dropdownText:n||t,onSelect:this.setFriendsListChoice}):"fitness"===e?s.a.createElement(vt,{dropdownText:r||t,onSelect:this.setFitnessChoice}):"info"===e?s.a.createElement(vt,{dropdownText:i||t,onSelect:this.setBasicInfoChoice}):"unit system"===e?s.a.createElement(ht,{dropdownText:c||t,onSelect:this.setUnitDisplayChoice}):"swim lap"===e?s.a.createElement(gt,{dropdownText:o||t,onCustomSwimClick:this.onCustomSwimClick,onSelect:this.setSwimLengthChoice}):void alert("error showing menu")}},{key:"displayErrors",value:function(){var e=this;return this.state.errorMsgs?s.a.createElement("div",{className:"msg-container"},s.a.createElement(I,{msg:this.state.errorMsgs,onClose:function(){console.log("clearing errors..."),e.setState({errorMsgs:""})}})):null}},{key:"displaySuccesses",value:function(){var e=this;return this.state.successMsgs?s.a.createElement("div",{className:"msg-container"},s.a.createElement(F,{msg:this.state.successMsgs,onClose:function(){e.setState({successMsgs:""})}})):null}},{key:"render",value:function(){var e=this.context.settings;return console.log("rendering settings"),this.context.firstName?s.a.createElement("div",{className:"settings-container"},s.a.createElement("h3",{className:"settings-header mt-3 pb-3"},"Settings"),s.a.createElement(ft,{showCustomSwimSettings:this.state.showCustomSwimSettings,closeCustomSwimSettings:this.closeCustomSwimSettings,onCustomSwimLengthChange:this.onCustomSwimLengthChange,setCustomSwimUnits:this.setCustomSwimUnits,setCustomSwimLength:this.setCustomSwimLength,customSwimUnits:this.state.customSwimUnits}),s.a.createElement("ul",{className:"settings-list"},s.a.createElement("li",{className:"settings-list-item"},s.a.createElement("i",{className:"fa help-icon","data-toggle":"tooltip","data-placement":"top",title:"Set who can see your friends list on you profile"},"\uf059"),s.a.createElement("span",{className:"setting-text"},"Who can see your friends list?"),this.renderDropDown("friends list",e.seeFriendsList)),s.a.createElement("li",{className:"settings-list-item"},s.a.createElement("i",{className:"fa help-icon","data-toggle":"tooltip","data-placement":"top",title:"Set who can see your fitness stats such as average number of steps taken per day, calories burned, etc."},"\uf059"),s.a.createElement("span",{className:"setting-text"},"Who can see your fitness?"),this.renderDropDown("fitness",e.seeFitness)),s.a.createElement("li",{className:"settings-list-item"},s.a.createElement("i",{className:"fa help-icon","data-toggle":"tooltip","data-placement":"top",title:"Set who can see descriptions about you such as your bio, height, weight, etc."},"\uf059"),s.a.createElement("span",{className:"setting-text"},"Who can see your basic info?"),this.renderDropDown("info",e.seeBasicInfo)),s.a.createElement("li",{className:"settings-list-item"},s.a.createElement("i",{className:"fa help-icon","data-toggle":"tooltip","data-placement":"top",title:"Set what unit system you would prefer to view measurements in"},"\uf059"),s.a.createElement("span",{className:"setting-text"},"Unit system to display"),this.renderDropDown("unit system",e.unitSystem)),s.a.createElement("li",{className:"settings-list-item"},s.a.createElement("i",{className:"fa help-icon","data-toggle":"tooltip","data-placement":"top",title:"Set the default length of your lap swim pool. You can change this individually for each workout"},"\uf059"),s.a.createElement("span",{className:"setting-text"},"Default swimming pool length"),this.renderDropDown("swim lap",e.swimLap)),s.a.createElement("li",{className:"settings-list-item",id:"save-settings-list-item"},s.a.createElement("div",{className:"help-icon empty-space"}),s.a.createElement("div",{className:"setting-text empty-space"}),s.a.createElement("div",{className:"save-settings"},s.a.createElement("button",{className:"save-settings-btn btn btn-primary",onClick:this.saveSettings},"Save")))),this.displayErrors(),this.displaySuccesses()):s.a.createElement(S,null)}}]),t}(n.Component);bt.contextType=_;var yt=Object(g.g)(bt);function Et(){var e=Object(N.getFromLocalStorage)(N.storageKey),t=Object(N.getFromSessionStorage)(N.storageKey);return e?e.token:t?t.token:null}var Nt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={unitSystem:""},a.submitSettings=a.submitSettings.bind(Object(E.a)(a)),a.radioChange=a.radioChange.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"submitSettings",value:function(){var e=Object(y.a)(b.a.mark(function e(t){var a,n,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=Object(z.a)({},this.state,{userToken:Et()}),e.next=4,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/updateSettings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.next=7,n.json();case 7:s=e.sent,alert(s.success);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){}},{key:"radioChange",value:function(e){this.setState({unitSystem:e.currentTarget.value})}},{key:"checkUnitSystem",value:function(e){var t=this.state.unitSystem;return!!this.state.unitSystem&&t===e}},{key:"render",value:function(){return s.a.createElement("div",null,"Stats settings",s.a.createElement("form",{onSubmit:this.submitSettings},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"english-units"},"English"),s.a.createElement("input",{id:"english-units",name:"unit-system-input",type:"radio",value:"english",checked:this.checkUnitSystem("english"),onChange:this.radioChange}),s.a.createElement("label",{htmlFor:"metric-units"},"Metric"),s.a.createElement("input",{id:"metric-units",name:"unit-system-input",type:"radio",value:"metric",checked:this.checkUnitSystem("metric"),onChange:this.radioChange})),s.a.createElement("div",null,s.a.createElement("input",{type:"submit",value:"Update"}))))}}]),t}(n.Component),St=(a(305),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={sideNavStyle:{width:"0px",clicked:!1,selected:""}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"openNav",value:function(){document.getElementById("mySidenav").style.width="65%"}},{key:"closeNav",value:function(e){document.getElementById("mySidenav").style.width="0"}},{key:"render",value:function(){var e=this.props,t=e.homeURL,a=e.communityURL,n=e.fitnessURL,r=e.profileURL,i=e.settingsURL,c=e.logout;return s.a.createElement("div",{className:"navbar-container"},s.a.createElement("span",{className:"expander",onClick:this.openNav},"\u2630"),s.a.createElement("div",{id:"mySidenav",className:"sidenav"},s.a.createElement("span",{className:"closebtn",onClick:this.closeNav},"\xd7"),s.a.createElement("div",{className:"prof-pic-container"},s.a.createElement("img",{src:this.context.profilePicture.profileURL,height:"75%",width:"75%",alt:"../profile/default_profile.png"})),s.a.createElement(h.b,{className:"nav-link",exact:!0,to:t,onClick:this.closeNav},"Home"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:a},onClick:this.closeNav},"Community"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:n},onClick:this.closeNav},"Fitness"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:r},onClick:this.closeNav},"Profile"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:i},onClick:this.closeNav},"Settings"),s.a.createElement("span",{className:"nav-link",onClick:c},"Logout")))}}]),t}(n.Component));St.contextType=_;var wt=Object(g.g)(St),kt=(a(306),a(169)),jt=a.n(kt),Ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.context;return s.a.createElement("div",{className:"homepage"},s.a.createElement("h1",null,"Welcome, ",e.firstName),s.a.createElement(jt.a,{className:"particles-container",params:{particles:{number:{value:50},size:{value:3},line_linked:{opacity:.6}},interactivity:{events:{onhover:{enable:!0,mode:"grab"}},modes:{grab:{line_linked:{opacity:.9},distance:200}}}}}))}}]),t}(n.Component);Ot.contextType=_;var xt=Ot,Ct=(a(307),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.homeURL,a=e.communityURL,n=e.fitnessURL,r=e.profileURL,i=e.settingsURL,c=e.logout;return s.a.createElement("div",{className:"sidemenu-container"},s.a.createElement("div",{id:"mySidenav",className:"sideMenu"},s.a.createElement("div",{className:"prof-pic-container"},s.a.createElement("img",{src:this.context.profilePicture.profileURL,height:"75%",width:"75%",alt:"../profile/default_profile.png"})),s.a.createElement(h.b,{className:"nav-link",exact:!0,to:t,onClick:this.closeNav},"Home"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:a},onClick:this.closeNav},"Community"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:n},onClick:this.closeNav},"Fitness"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:r},onClick:this.closeNav},"Profile"),s.a.createElement(h.b,{className:"nav-link",to:{pathname:i},onClick:this.closeNav},"Settings"),s.a.createElement("span",{className:"nav-link",onClick:c},"Logout")))}}]),t}(n.Component));Ct.contextType=_;var Lt=Object(g.g)(Ct),Dt=(a(308),a(309),a(113),a(123)),Tt=(a(311),"https://us-central1-athlos-live.cloudfunctions.net/athlos-server/getUserInfo"),Ut="/app",It=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={friends:[],friendRequests:[],friendsPending:[],firstName:"",lastName:"",username:"",gender:"",bio:"",height:"",weight:"",age:"",profilePicture:"",settings:{},isLoading:!1,logout:!1,notification:null,mounted:!1,rootURL:a.props.match.url,friendTableRows:[],numFriendsDisplay:25,jumpJson:{activityData:[],action:"jump",imageUrl:"https://img.icons8.com/ios/50/000000/trampoline-park-filled.png"},runJson:{activityData:[],action:"run",imageUrl:"https://img.icons8.com/nolan/64/000000/running.png"},swimJson:{activityData:[],action:"swim",imageUrl:"https://img.icons8.com/nolan/64/000000/swimming.png"}},a.logout=a.logout.bind(Object(E.a)(a)),a.getActivityJson=a.getActivityJson.bind(Object(E.a)(a)),a.addFriendRows=a.addFriendRows.bind(Object(E.a)(a)),a.renderHeader=a.renderHeader.bind(Object(E.a)(a)),a.updateUserInfo=a.updateUserInfo.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getActivityJson",value:function(){var e=Object(y.a)(b.a.mark(function e(t){var a,n,s,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Headers,n=Object(N.getToken)(),a.append("authorization","Bearer ".concat(n)),a.append("activity",t),e.next=6,fetch("https://us-central1-athlos-live.cloudfunctions.net/athlos-server/data",{method:"GET",headers:a});case 6:return s=e.sent,e.next=9,s.json();case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"addFriendRows",value:function(){var e=Object(y.a)(b.a.mark(function e(t,a){var n,r,i,c=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=b.a.mark(function e(r){var i,o,l,u,m,d,p,h,g;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==a-1){e.next=2;break}return e.abrupt("return","break");case 2:return i=t[r],o=i.id,l=i.firstName,u=i.lastName,e.next=5,Promise.all([Z(o),X(o),ee(o)]);case 5:m=e.sent,d=Object(T.a)(m,3),p=d[0],h=d[1],g=d[2],console.log(g),n.push(s.a.createElement(ae,{key:o,isFriend:!0,isFriendRequest:!1,rank:r+1,onClick:function(){c.props.history.push("/app/profile/".concat(g))},profileUrl:h,defaultProfile:"./profile/default_profile.png",imgAlt:"../profile/default_profile.png",firstName:l,lastName:u,bests:p}));case 12:case"end":return e.stop()}},e)}),i=0;case 3:if(!(i<t.length)){e.next=11;break}return e.delegateYield(r(i),"t0",5);case 5:if("break"!==e.t0){e.next=8;break}return e.abrupt("break",11);case 8:i++,e.next=3;break;case 11:return console.log(n),e.abrupt("return",n);case 13:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s,r,i,c,o,l;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isMounted=!0,t=Object(N.getToken)()){e.next=6;break}return this.setState({logout:!0}),this.props.history.push("/"),e.abrupt("return");case 6:return(a=new Headers).append("authorization","Bearer ".concat(t)),e.next=10,fetch(Tt,{method:"GET",headers:a});case 10:return n=e.sent,e.next=13,n.json();case 13:return s=e.sent,console.log(s),r=this.state.numFriendsDisplay,e.next=18,this.addFriendRows(s.friends,r);case 18:return i=e.sent,e.next=21,this.getActivityJson("jump");case 21:return c=e.sent,e.next=24,this.getActivityJson("swim");case 24:return o=e.sent,e.next=27,this.getActivityJson("run");case 27:l=e.sent,s.success&&c.success&&o.success&&l.success&&this._isMounted?this.setState(function(e){return Object(z.a)({},s,{mounted:!0,friendTableRows:i,jumpJson:Object(z.a)({},e.jumpJson,{activityData:c.activityData}),runJson:Object(z.a)({},e.runJson,{activityData:l.activityData}),swimJson:Object(z.a)({},e.swimJson,{activityData:o.activityData})})}):alert("not success");case 30:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1,console.log("unmounting header...")}},{key:"logout",value:function(){console.log("logging out..."),Object(N.removeFromLocalStorage)(N.storageKey),Object(N.removeFromSessionStorage)(N.storageKey),this.setState({isLoading:!0,logout:!0}),this.props.history.push("/")}},{key:"renderHeader",value:function(){var e=this,t=this.props.match;if(console.log(this.props),Object(N.getToken)())return s.a.createElement("div",{className:"header w-100"},s.a.createElement("div",{className:"d-flex align-items-center w-100 h-100"},s.a.createElement("span",{className:"header-title position-absolute w-100"},"Athlos Tracker"),s.a.createElement(Dt.a,{query:"(max-width: ".concat("600px",")"),render:function(){return s.a.createElement("div",{className:"navbar-container ml-3 mt-auto mb-auto"},s.a.createElement(wt,{homeURL:"/app",communityURL:"".concat(t.url,"/community"),fitnessURL:"".concat(t.url,"/fitness"),profileURL:"".concat(t.url,"/profile/").concat(e.state.username),settingsURL:"".concat(t.url,"/settings"),logout:e.logout}))}})));alert("no token in the storage..."),this.props.history.push("/")}},{key:"renderSideMenu",value:function(){var e=this,t=this.props.match;return s.a.createElement(Dt.a,{query:"(min-width: ".concat("600px",")"),render:function(){return s.a.createElement("div",{className:"col-md-3 sideMenu-container"},s.a.createElement("div",{className:"card text-center"},s.a.createElement("div",{className:"sideMenu-container"},s.a.createElement(Lt,{homeURL:"/app",communityURL:"".concat(t.url,"/community"),fitnessURL:"".concat(t.url,"/fitness"),profileURL:"".concat(t.url,"/profile/").concat(e.state.username),settingsURL:"".concat(t.url,"/settings"),logout:e.logout}))))}})}},{key:"updateUserInfo",value:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(N.getToken)(),(a=new Headers).append("authorization","Bearer ".concat(t)),e.next=5,fetch(Tt,{method:"GET",headers:a});case 5:return n=e.sent,e.next=8,n.json();case 8:s=e.sent,this.setState(function(e){return Object(z.a)({},s,{mounted:!0,friendTableRows:e.friendTableRows,jumpJson:e.jumpJson,runJson:e.runJson,swimJson:e.swimJson})});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log("rendering header..."),s.a.createElement("div",{className:"home-container"},s.a.createElement(_.Provider,{value:this.state},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},this.renderHeader())),s.a.createElement("div",{className:"mt-3 ml-2 p-1 content"},this.renderSideMenu(),s.a.createElement("div",{className:"col-md-9 col-12 page-container"},s.a.createElement("div",{className:"card text-center h-100"},s.a.createElement(g.d,{location:this.props.location},s.a.createElement(g.b,{exact:!0,path:"".concat(Ut),component:xt}),s.a.createElement(g.b,{path:"".concat(Ut,"/community"),component:me}),s.a.createElement(g.b,{path:"".concat(Ut,"/fitness"),component:_e}),s.a.createElement(g.b,{path:"".concat(Ut,"/jumpDetails"),component:Ze}),s.a.createElement(g.b,{path:"".concat(Ut,"/swimDetails"),component:Ye}),s.a.createElement(g.b,{path:"".concat(Ut,"/runDetails"),component:Ve}),s.a.createElement(g.b,{exact:!0,path:"".concat(Ut,"/profile/:username?"),component:mt}),s.a.createElement(g.b,{path:"".concat(Ut,"/profile/:username?/edit"),component:rt}),s.a.createElement(g.b,{exact:!0,path:"".concat(Ut,"/settings"),render:function(t){return s.a.createElement(yt,Object.assign({},t,{updateUserInfo:e.updateUserInfo}))}}),s.a.createElement(g.b,{path:"".concat(Ut,"/settings/stats"),component:Nt})))))))}}]),t}(n.Component),Ft=Object(g.g)(It),Pt=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return console.log("rendering spa..."),s.a.createElement("div",{className:"App"},s.a.createElement(g.b,{exact:!0,path:"/",component:M}),s.a.createElement(g.b,{path:"/confirmation",component:q}),s.a.createElement(g.b,{path:"/pwResetPage",component:G}),s.a.createElement(g.b,{path:"".concat("/app"),component:Ft}))}}]),t}(n.Component),Mt=Object(g.g)(Pt),At=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={user:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,null,s.a.createElement(Mt,null))}}]),t}(n.Component);c.b.add(o.b,o.d,o.a,o.e,o.c),i.a.render(s.a.createElement(At,null),document.getElementById("root"))},9:function(e,t){var a="the_main_app";function n(e){if(!e)return null;try{var t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(a){return null}}function s(e){if(!e)return null;try{var t=sessionStorage.getItem(e);return t?JSON.parse(t):null}catch(a){return null}}e.exports={getFromLocalStorage:n,setInLocalStorage:function(e,t){e||console.error("Error: Key is missing");try{localStorage.setItem(e,JSON.stringify(t))}catch(a){console.error(a)}},removeFromLocalStorage:function(e){localStorage.removeItem(e)},removeFromSessionStorage:function(e){sessionStorage.removeItem(e)},setInSessionStorage:function(e,t){e||console.error("Error: Key is missing");try{sessionStorage.setItem(e,JSON.stringify(t))}catch(a){console.error(a)}},getFromSessionStorage:s,getToken:function(){var e=n(a),t=s(a);return e?e.token:t?t.token:null},storageKey:a,socketStorageKey:"socket"}}},[[171,1,2]]]);
//# sourceMappingURL=main.3fe04d76.chunk.js.map